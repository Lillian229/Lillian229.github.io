(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{420:function(t,v,_){"use strict";_.r(v);var a=_(34),e=Object(a.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"基于http网络层的-前端性能优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基于http网络层的-前端性能优化"}},[t._v("#")]),t._v(" 基于HTTP网络层的 “前端性能优化”")]),t._v(" "),_("h2",{attrs:{id:"产品性能优化方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#产品性能优化方案"}},[t._v("#")]),t._v(" 产品性能优化方案")]),t._v(" "),_("ul",[_("li",[t._v("HTTP网络层优化")]),t._v(" "),_("li",[t._v("代码编译层优化 webpack")]),t._v(" "),_("li",[t._v("代码运行层优化 html/css + javascript + vue + react")]),t._v(" "),_("li",[t._v("安全优化 xss + csrf")]),t._v(" "),_("li",[t._v("数据埋点及性能监控\n……\nCRP（Critical Rendering Path）关键渲染路径")])]),t._v(" "),_("h2",{attrs:{id:"从输入url地址到看到页面-中间都经历了啥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从输入url地址到看到页面-中间都经历了啥"}},[t._v("#")]),t._v(" 从输入URL地址到看到页面，中间都经历了啥")]),t._v(" "),_("h3",{attrs:{id:"全过程概览"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#全过程概览"}},[t._v("#")]),t._v(" 全过程概览")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/Inkedurl_whole_process_LI.jpg",alt:""}})]),t._v(" "),_("h3",{attrs:{id:"第一步-url解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第一步-url解析"}},[t._v("#")]),t._v(" 第一步：URL解析")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("地址解析\n"),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/url_parses.png",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("编码")])])]),t._v(" "),_("h3",{attrs:{id:"第二步-缓存检查"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第二步-缓存检查"}},[t._v("#")]),t._v(" 第二步：缓存检查")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[t._v("缓存位置：\nMemory Cache : 内存缓存\nDisk Cache：硬盘缓存\n")])])]),_("p",[t._v("打开网页：查找 disk cache 中是否有匹配，如有则使用，如没有则发送网络请求\n普通刷新 (F5)：因TAB没关闭，因此memory cache是可用的，会被优先使用，其次才是disk cache\n强制刷新 (Ctrl + F5)：浏览器不使用缓存，因此发送的请求头部均带有 Cache-control: no-cache，服务器直接返回 200 和最新内容")]),t._v(" "),_("p",[_("font",{attrs:{color:"#DC143C"}},[t._v("强缓存 Expires / Cache-Control")]),t._v("\n浏览器对于强缓存的处理：根据第一次请求资源时返回的响应头来确定的")],1),t._v(" "),_("ul",[_("li",[_("p",[t._v("Expires：缓存过期时间，用来指定资源到期的时间（HTTP/1.0）")])]),t._v(" "),_("li",[_("p",[t._v("Cache-Control：cache-control: max-age=2592000第一次拿到资源后的2592000秒内（30天），再次发送请求，读取缓存中的信息（HTTP/1.1）")])]),t._v(" "),_("li",[_("p",[t._v("两者同时存在的话，Cache-Control优先级高于Expires")])])]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/cache01.png",height:"70%",width:"70%"}}),t._v(" "),_("h4",{attrs:{id:"协商缓存-last-modified-etag"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存-last-modified-etag"}},[t._v("#")]),t._v(" 协商缓存 Last-Modified / ETag")]),t._v(" "),_("p",[t._v("协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发起请求，由服务器根据缓存标识决定是否使用缓存的过程")]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/cache02.png",height:"70%",width:"70%"}}),t._v(" "),_("h4",{attrs:{id:"数据缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据缓存"}},[t._v("#")]),t._v(" 数据缓存")]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/cache03.png",height:"70%",width:"70%"}}),t._v(" "),_("h3",{attrs:{id:"第三步-dns解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第三步-dns解析"}},[t._v("#")]),t._v(" 第三步：DNS解析")]),t._v(" "),_("ul",[_("li",[t._v("递归查询")]),t._v(" "),_("li",[t._v("迭代查询")])]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/dns_parses.png",height:"70%",width:"70%"}}),t._v(" "),_("p",[t._v("每一次DNS解析时间预计在20~120毫秒")]),t._v(" "),_("ul",[_("li",[t._v("减少DNS请求次数")]),t._v(" "),_("li",[t._v("DNS预获取（DNS Prefetch）")])]),t._v(" "),_("p",[t._v("服务器拆分的优势")]),t._v(" "),_("ul",[_("li",[t._v("资源的合理利用")]),t._v(" "),_("li",[t._v("抗压能力加强")]),t._v(" "),_("li",[t._v("提高HTTP并发、")]),t._v(" "),_("li",[t._v("……")])]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/serve_split.png",height:"70%",width:"70%"}}),t._v(" "),_("h3",{attrs:{id:"第四步-tcp三次握手"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第四步-tcp三次握手"}},[t._v("#")]),t._v(" 第四步：TCP三次握手")]),t._v(" "),_("p",[t._v("为了准确无误地把数据送达目标处，TCP协议采用了三次握手策略。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("第一次握手：客户端给服务器发送一个SYN。客户端发送网络包，服务端收到了。服务器得出结论：客户端的发送能力，服务端的接收能力正常。")])]),t._v(" "),_("li",[_("p",[t._v("第二次握手：服务端收到SYN报文之后，会应答一个SYN+ACK报文。服务端发包，客户端收到了。客户端得出结论：服务端的接收和发送能力，客户端的接收和发送能力正常。但是此时服务端不能确认客户端的接收能力是否正常。")])]),t._v(" "),_("li",[_("p",[t._v("第三次握手;客户端收到SYN+ACK报文之后，回应一个ACK报文。客户端发包，服务端收到了。服务器得出结论：客户端的接收和发送能力，自己的接收发送能力都正常。\n通过三次握手，双方都确认对方的接收以及发送能力正常。")])]),t._v(" "),_("li",[_("p",[t._v("seq序号，用来标识从TCP源端向目的端发送的字节流，发起方发送数据时对此进行标记")])]),t._v(" "),_("li",[_("p",[t._v("ack确认序号，只有ACK标志位为1时，确认序号字段才有效，ack=seq+1")])]),t._v(" "),_("li",[_("p",[t._v("标志位")]),t._v(" "),_("ul",[_("li",[t._v("ACK：确认序号有效")]),t._v(" "),_("li",[t._v("RST：重置连接")]),t._v(" "),_("li",[t._v("SYN：发起一个新连接\n"),_("ul",[_("li",[t._v("同步序列编号（Synchronize Sequence Numbers）。是TCP/IP建立连接时使用的握手信号。")])])]),t._v(" "),_("li",[t._v("FIN：释放一个连接3")]),t._v(" "),_("li",[t._v("……")])])])]),t._v(" "),_("h4",{attrs:{id:"⭐三次握手为什么不用两次-或者四次"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#⭐三次握手为什么不用两次-或者四次"}},[t._v("#")]),t._v(" ⭐三次握手为什么不用两次，或者四次?")]),t._v(" "),_("p",[t._v("TCP作为一种可靠传输控制协议，其核心思想：既要保证数据可靠传输，又要提高传输的效率！")]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/三次握手.png",height:"70%",width:"70%"}}),t._v(" "),_("h3",{attrs:{id:"第五步-数据传输"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第五步-数据传输"}},[t._v("#")]),t._v(" 第五步：数据传输")]),t._v(" "),_("ul",[_("li",[t._v("HTTP报文\n"),_("ul",[_("li",[t._v("请求报文")]),t._v(" "),_("li",[t._v("响应报文")])])]),t._v(" "),_("li",[t._v("响应状态码\n"),_("ul",[_("li",[t._v("200 OK")]),t._v(" "),_("li",[t._v("202 Accepted ：服务器已接受请求，但尚未处理（异步）")]),t._v(" "),_("li",[t._v("204 No Content：服务器成功处理了请求，但不需要返回任何实体内容")]),t._v(" "),_("li",[t._v("206 Partial Content：服务器已经成功处理了部分 GET 请求（断点续传 - Range/If-Range/Content-Range/Content-Type:”multipart/byteranges”/Content-Length….）")]),t._v(" "),_("li",[t._v("301 Moved Permanently")]),t._v(" "),_("li",[t._v("302 Move Temporarily")]),t._v(" "),_("li",[t._v("304 Not Modified")]),t._v(" "),_("li",[t._v("305 Use Proxy")]),t._v(" "),_("li",[t._v("400 Bad Request : 请求参数有误")]),t._v(" "),_("li",[t._v("401 Unauthorized：权限（Authorization）")]),t._v(" "),_("li",[t._v("404 Not Found")]),t._v(" "),_("li",[t._v("405 Method Not Allowed")]),t._v(" "),_("li",[t._v("408 Request Timeout")]),t._v(" "),_("li",[t._v("500 Internal Server Error")]),t._v(" "),_("li",[t._v("503 Service Unavailable")]),t._v(" "),_("li",[t._v("505 HTTP Version Not Supported")]),t._v(" "),_("li",[t._v("……")])])])]),t._v(" "),_("h3",{attrs:{id:"第六步-tcp四次挥手"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第六步-tcp四次挥手"}},[t._v("#")]),t._v(" 第六步：TCP四次挥手")]),t._v(" "),_("img",{attrs:{src:"https://hcx-blog-images.oss-cn-chengdu.aliyuncs.com/images/TCPfour.png",height:"70%",width:"70%"}}),t._v(" "),_("h4",{attrs:{id:"⭐为什么连接的时候是三次握手-关闭的时候却是四次握手"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#⭐为什么连接的时候是三次握手-关闭的时候却是四次握手"}},[t._v("#")]),t._v(" ⭐为什么连接的时候是三次握手，关闭的时候却是四次握手？")]),t._v(" "),_("p",[t._v("服务器端收到客户端的SYN连接请求报文后，可以直接发送SYN+ACK报文")]),t._v(" "),_("p",[t._v("但关闭连接时，当服务器端收到FIN报文时，很可能并不会立即关闭链接，所以只能先回复一个ACK报文，告诉客户端：”你发的FIN报文我收到了”，只有等到服务器端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送，故需要四步握手。")]),t._v(" "),_("h4",{attrs:{id:"connection-keep-alive"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#connection-keep-alive"}},[t._v("#")]),t._v(" Connection: keep-alive")]),t._v(" "),_("h3",{attrs:{id:"第七步-页面渲染"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第七步-页面渲染"}},[t._v("#")]),t._v(" 第七步：页面渲染")]),t._v(" "),_("h2",{attrs:{id:"🌟性能优化汇总"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🌟性能优化汇总"}},[t._v("#")]),t._v(" 🌟性能优化汇总")]),t._v(" "),_("p",[t._v("1.利用缓存")]),t._v(" "),_("ul",[_("li",[t._v("对于静态资源文件实现强缓存和协商缓存（扩展：文件有更新，如何保证及时刷新？）")]),t._v(" "),_("li",[t._v("对于不经常更新的接口数据采用本地存储做数据缓存（扩展：cookie / localStorage / vuex|redux 区别？）")])]),t._v(" "),_("p",[t._v("2.DNS优化")]),t._v(" "),_("ul",[_("li",[t._v("分服务器部署，增加HTTP并发性（导致DNS解析变慢）")]),t._v(" "),_("li",[t._v("DNS Prefetch")])]),t._v(" "),_("p",[t._v("3.TCP的三次握手和四次挥手")]),t._v(" "),_("ul",[_("li",[t._v("Connection:keep-alive")])]),t._v(" "),_("p",[t._v("4.数据传输")]),t._v(" "),_("ul",[_("li",[t._v("减少数据传输的大小\n"),_("ul",[_("li",[t._v("内容或者数据压缩（webpack等）")]),t._v(" "),_("li",[t._v("服务器端一定要开启GZIP压缩（一般能压缩60%左右）")]),t._v(" "),_("li",[t._v("大批量数据分批次请求（例如：下拉刷新或者分页，保证首次加载请求数据少）")])])]),t._v(" "),_("li",[t._v("减少HTTP请求的次数\n"),_("ul",[_("li",[t._v("资源文件合并处理")]),t._v(" "),_("li",[t._v("字体图标")]),t._v(" "),_("li",[t._v("雪碧图 CSS-Sprit")]),t._v(" "),_("li",[t._v("图片的BASE64")]),t._v(" "),_("li",[t._v("......")])])])]),t._v(" "),_("p",[t._v("5.CDN服务器“地域分布式”")]),t._v(" "),_("p",[t._v("6.采用HTTP2.0\n网络化是前端性能优化的中的重点内容，因为大部分的消耗都发生在网络层，尤其是第一次页面加载，如何减少等待时间很重要“减少白屏的效果和时间”")]),t._v(" "),_("ul",[_("li",[t._v("LOADDING 人性化体验")]),t._v(" "),_("li",[t._v("骨架屏：客户端骨屏 + 服务器骨架屏")]),t._v(" "),_("li",[t._v("图片延迟加载")]),t._v(" "),_("li",[t._v("....")])])])}),[],!1,null,null,null);v.default=e.exports}}]);